<!-- HTML header for doxygen 1.8.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
     <title>Apophenia: a library for scientific computing</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
     <link rel="stylesheet" href="typical.css" type="text/css" >
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<!-- Google is watching. -->
<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-134313-2";
urchinTracker();
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="typical.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<center><table cellpadding=10pt>
<tr> <td><img width=140px src=flake.gif alt="Patterns in static"></td>
<td><table>
    <tr> <td><center><h2><a href="http://apophenia.info">Apophenia</a></h2></center></td></tr>
    <tr><td><div class="qindex"> <a class="qindex" href="outline.html">Outline</a> | <a class="qindex" href="group__all__public.html">Index </a>  |         <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
                <!-- <a class="qindex" href="files.html">File&nbsp;List&nbsp;</a> -->  </div></td></tr></table>
                                  </td></tr></table></center>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('dataones.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Data format for regression-type models </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Regression-type estimations typically require a constant column. That is, the 0th column of the data is a constant (one), so the parameter <img class="formulaInl" alt="$\beta_0$" src="form_123.png"/> is slightly special in corresponding to a constant rather than a variable.</p>
<p>Some stats packages implicitly assume a constant column, which the user never sees. This violates the principle of transparency upon which Apophenia is based. Given a data matrix <img class="formulaInl" alt="$X$" src="form_3.png"/> with the estimated parameters <img class="formulaInl" alt="$\beta$" src="form_7.png"/>, if the model asserts that the product <img class="formulaInl" alt="$X\beta$" src="form_124.png"/> has meaning, then you should be able to easily calculate that product. With a ones column, a dot product is one line: <code>apop_dot(x, your_est-&gt;parameters)</code>; without a ones column, one would basically have to construct one (using <code>gsl_matrix_set_all</code> and <code>apop_data_stack</code>).</p>
<p>Each regression-type estimation has one dependent variable and several independent. In the end, we want the dependent variable to be in the vector element. Removing a column from a <code>gsl_matrix</code> and adjusting all subsequent columns is relatively difficult, because (like most structs built with the aim of very efficient processing) the struct depends on an equal spacing in memory between each element.</p>
<p><em> The automatic case</em></p>
<p>We can resolve both the need for a ones column and for having the dependent column in the vector at the same time. Given a data set with no vector element and the dependent variable in the first column of the matrix, we can copy the dependent variable into the vector and then replace the first column of the matrix with ones. The result fits all of the above expectations.</p>
<p>You as a user merely have to send in a <code><a class="el" href="structapop__data.html">apop_data</a></code> set with <code>NULL</code> vector and a dependent column in the first column. If the data is coming from the database, then the query is natural:</p>
<div class="fragment"><div class="line"><a class="code" href="structapop__data.html">apop_data</a> *regression_data = apop_query_to_data(<span class="stringliteral">&quot;select depvar, indyvar1, indyvar2, indyvar3 from dataset&quot;</span>);</div>
<div class="line"><a class="code" href="group__all__public.html#gadc1043a5cda856a5d0a5629dd3f9515e">apop_model_print</a>(<a class="code" href="group__all__public.html#gaf78221aa4167b7b52bdd0a26aab8e576">apop_estimate</a>(regression_data, <a class="code" href="group__models.html#ga85524b1deabd5829227888fd91740cc3">apop_ols</a>));</div>
</div><!-- fragment --><p><em> The already-prepped case</em></p>
<p>If your data has a vector element, then the prep routines won't change anything. If you don't want to use a constant column, or your data has already been prepped by an estimation, then this is what you want.</p>
<div class="fragment"><div class="line"><a class="code" href="structapop__data.html">apop_data</a> *regression_data = apop_query_to_mixed_data(<span class="stringliteral">&quot;vmmm&quot;</span>, <span class="stringliteral">&quot;select depvar, indyvar1, indvar2, indvar3 from dataset&quot;</span>);</div>
<div class="line"><a class="code" href="group__all__public.html#gadc1043a5cda856a5d0a5629dd3f9515e">apop_model_print</a>(<a class="code" href="group__all__public.html#gaf78221aa4167b7b52bdd0a26aab8e576">apop_estimate</a>(regression_data, <a class="code" href="group__models.html#gaa88a402cf7d02c25c4613a74ace1b0c1">apop_logit</a>));</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- doc-content -->
</body></html>
