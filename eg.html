<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html> <head>
     <title>Apophenia: a library for scientific computing</title>
<!-- Google is watching. -->
<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-134313-2";
urchinTracker();
</script>
     <link rel="stylesheet" href="typical.css" type="text/css" >
     <script  type="text/javascript" language="JavaScript" src="tree.js"></script>
</head><body>
     <center><table cellpadding=10pt>
     <tr> <td><img width=140px src=flake.gif alt="Patterns in static"></td> 
    <td><table>
     	<tr> <td><center><h2><a href="http://apophenia.info">Apophenia</a></h2></center></td></tr>
<tr><td><div class="qindex"><a class="qindex" href="index.html">&nbsp;Intro</a> | <a class="qindex" href="outline.html">Outline</a> | <a class="qindex" href="globals.html">Index</a> <!--| <a class="qindex" href="files.html">File&nbsp;List&nbsp;</a> -->  </div></td></tr></table>
	</td></tr></table></center>
    <div> <!--Doxygen generates an extra </div>.-->
<!-- Generated by Doxygen 1.8.9.1 -->
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Some examples </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Here are a few pieces of sample code, gathered from elsewhere in the documentation, for testing your installation or to give you a sense of what code with Apophenia's tools looks like. If you'd like more context or explanation, please click through to the page from which the example was taken.</p>
<p>In the documentation for the <a class="el" href="group__models.html#ga85524b1deabd5829227888fd91740cc3">apop_ols</a> model, a program to read in data and run a regression. You'll need to go to that page for the sample data and further discussion.</p>
<p>From the <a class="el" href="setup.html">Setting up</a> page, an example of gathering data from two processes, saving the input to a database, then doing a later analysis:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="apop_8h.html">apop.h</a>&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="comment">//Your processes are probably a bit more complex.</span></div>
<div class="line"><span class="keywordtype">double</span> process_one(gsl_rng *r){</div>
<div class="line">    <span class="keywordflow">return</span> gsl_rng_uniform(r) * gsl_rng_uniform(r) ;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">double</span> process_two(gsl_rng *r){</div>
<div class="line">    <span class="keywordflow">return</span> gsl_rng_uniform(r);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main(){</div>
<div class="line">    <span class="keywordtype">double</span> p1, p2;</div>
<div class="line">    <span class="keywordtype">int</span> i;</div>
<div class="line">    gsl_rng *r = <a class="code" href="group__convenience__fns.html#gada044cf02135422a9f9292b6054c86dd">apop_rng_alloc</a>(123);</div>
<div class="line"></div>
<div class="line">    <span class="comment">//create the database and the data table.</span></div>
<div class="line">    <a class="code" href="apop_8h.html#a4d81aff912df2982697038c51795e358">apop_db_open</a>(<span class="stringliteral">&quot;runs.db&quot;</span>);</div>
<div class="line">    <a class="code" href="apop_8h.html#a01d501ca84ade92bc72fd4f67a617f64">apop_table_exists</a>(<span class="stringliteral">&quot;samples&quot;</span>, <span class="charliteral">&#39;d&#39;</span>); <span class="comment">//If the table already exists, delete it.</span></div>
<div class="line">    <a class="code" href="group__queries.html#ga236452b3305ea7b791c781d91a819e3b">apop_query</a>(<span class="stringliteral">&quot;create table samples(iteration, process, value); begin;&quot;</span>);</div>
<div class="line"></div>
<div class="line">    <span class="comment">//populate the data table with runs.</span></div>
<div class="line">    <span class="keywordflow">for</span> (i=0; i&lt;1000; i++){</div>
<div class="line">        p1 = process_one(r);</div>
<div class="line">        p2 = process_two(r);</div>
<div class="line">        <a class="code" href="group__queries.html#ga236452b3305ea7b791c781d91a819e3b">apop_query</a>(<span class="stringliteral">&quot;insert into samples values(%i, %i, %g);&quot;</span>, i, 1, p1);</div>
<div class="line">        <a class="code" href="group__queries.html#ga236452b3305ea7b791c781d91a819e3b">apop_query</a>(<span class="stringliteral">&quot;insert into samples values(%i, %i, %g);&quot;</span>, i, 2, p2);</div>
<div class="line">    }</div>
<div class="line">    <a class="code" href="group__queries.html#ga236452b3305ea7b791c781d91a819e3b">apop_query</a>(<span class="stringliteral">&quot;commit;&quot;</span>); <span class="comment">//the begin-commit wrapper saves writes to the drive.</span></div>
<div class="line"></div>
<div class="line">    <span class="comment">//pull the data from the database, converting it into a table along the way. </span></div>
<div class="line">    <a class="code" href="structapop__data.html">apop_data</a> *m  = <a class="code" href="apop_8h.html#aebe17fe6f2b0c49c0c90824b7a68ff90">apop_db_to_crosstab</a>(<span class="stringliteral">&quot;samples&quot;</span>, <span class="stringliteral">&quot;iteration&quot;</span>,<span class="stringliteral">&quot;process&quot;</span>, <span class="stringliteral">&quot;value&quot;</span>);</div>
<div class="line"></div>
<div class="line">    gsl_vector *v1 = <a class="code" href="apop_8h.html#a825321182fbaa7471069f13447170810">Apop_cv</a>(m, 0); <span class="comment">//get vector views of the two table columns.</span></div>
<div class="line">    gsl_vector *v2 = <a class="code" href="apop_8h.html#a825321182fbaa7471069f13447170810">Apop_cv</a>(m, 1);</div>
<div class="line"></div>
<div class="line">    <span class="comment">//Output a table of means/variances, and t-test results.</span></div>
<div class="line">    printf(<span class="stringliteral">&quot;\t   mean\t\t   var\n&quot;</span>);</div>
<div class="line">    printf(<span class="stringliteral">&quot;process 1: %f\t%f\n&quot;</span>, <a class="code" href="group__vector__moments.html#ga0f69c8414f1d93fa15f3a631710dcd7a">apop_mean</a>(v1), <a class="code" href="group__vector__moments.html#gacc311abe133963c7959162a7d3d83fb8">apop_var</a>(v1));</div>
<div class="line">    printf(<span class="stringliteral">&quot;process 2: %f\t%f\n\n&quot;</span>, <a class="code" href="group__vector__moments.html#ga0f69c8414f1d93fa15f3a631710dcd7a">apop_mean</a>(v2), <a class="code" href="group__vector__moments.html#gacc311abe133963c7959162a7d3d83fb8">apop_var</a>(v2));</div>
<div class="line">    printf(<span class="stringliteral">&quot;t test\n&quot;</span>);</div>
<div class="line">    <a class="code" href="group__output.html#ga9a30c437ec11a11e37e0db7f82386275">apop_data_show</a>(<a class="code" href="group__ttest.html#ga65c94b79fe91308dc97829741acc9322">apop_t_test</a>(v1, v2));</div>
<div class="line">    <a class="code" href="group__apop__print.html#gab45a848e5dbcaf82b5b95cd03f7b396a">apop_data_print</a>(m, <span class="stringliteral">&quot;the_data.txt&quot;</span>);</div>
<div class="line">}</div>
</div><!-- fragment --><p>In the <a class="el" href="outline.html">An outline of the library</a> section on map/apply, a new <img class="formulaInl" alt="$t$" src="form_44.png"/>-test on every row, with all operations acting on entire rows rather than individual data points:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="apop_8h.html">apop.h</a>&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">double</span> row_offset;</div>
<div class="line">gsl_rng *r;</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> offset_rng(<span class="keywordtype">double</span> *v){*v = gsl_rng_uniform(r) + row_offset;}</div>
<div class="line"><span class="keywordtype">double</span> find_tstat(gsl_vector *in){ <span class="keywordflow">return</span> <a class="code" href="group__vector__moments.html#ga0f69c8414f1d93fa15f3a631710dcd7a">apop_mean</a>(in)/sqrt(<a class="code" href="group__vector__moments.html#gacc311abe133963c7959162a7d3d83fb8">apop_var</a>(in));}</div>
<div class="line"><span class="keywordtype">double</span> conf(<span class="keywordtype">double</span> in, <span class="keywordtype">void</span> *df){ <span class="keywordflow">return</span> gsl_cdf_tdist_P(in, *(<span class="keywordtype">int</span> *)df);}</div>
<div class="line"></div>
<div class="line"><span class="comment">//apop_vector_mean is a macro, so we can&#39;t point a pointer to it.</span></div>
<div class="line"><span class="keywordtype">double</span> mu(gsl_vector *in){ <span class="keywordflow">return</span> <a class="code" href="apop_8h.html#ab20e5ad95df0f24a1ea06294695031a8">apop_vector_mean</a>(in);}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main(){</div>
<div class="line">    <a class="code" href="structapop__data.html">apop_data</a> *d = <a class="code" href="apop_8h.html#ac39d6a56933b6f084328ec5ecd5090d8">apop_data_alloc</a>(10, 100);</div>
<div class="line">    r = <a class="code" href="group__convenience__fns.html#gada044cf02135422a9f9292b6054c86dd">apop_rng_alloc</a>(3242);</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt; 10; i++){</div>
<div class="line">        row_offset = gsl_rng_uniform(r)*2 -1;</div>
<div class="line">        Apop_row_v(d, i, onerow);</div>
<div class="line">        <a class="code" href="group__mapply.html#ga51964750c64d327e52e2230019e44f66">apop_vector_apply</a>(onerow, offset_rng);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">size_t</span> df = d-&gt;matrix-&gt;size2-1;</div>
<div class="line">    <a class="code" href="structapop__data.html">apop_data</a> *means = <a class="code" href="group__mapply.html#gaacff3707e418a067104c77c410b43f69">apop_map</a>(d, .fn_v = mu, .part =<span class="charliteral">&#39;r&#39;</span>);</div>
<div class="line">    <a class="code" href="structapop__data.html">apop_data</a> *tstats = <a class="code" href="group__mapply.html#gaacff3707e418a067104c77c410b43f69">apop_map</a>(d, .fn_v = find_tstat, .part =<span class="charliteral">&#39;r&#39;</span>);</div>
<div class="line">    <a class="code" href="structapop__data.html">apop_data</a> *confidences = <a class="code" href="group__mapply.html#gaacff3707e418a067104c77c410b43f69">apop_map</a>(tstats, .fn_dp = conf, .param = &amp;df);</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#ifndef Testing</span></div>
<div class="line">    printf(<span class="stringliteral">&quot;means:\n&quot;</span>); <a class="code" href="group__output.html#ga9a30c437ec11a11e37e0db7f82386275">apop_data_show</a>(means);</div>
<div class="line">    printf(<span class="stringliteral">&quot;\nt stats:\n&quot;</span>); <a class="code" href="group__output.html#ga9a30c437ec11a11e37e0db7f82386275">apop_data_show</a>(tstats);</div>
<div class="line">    printf(<span class="stringliteral">&quot;\nconfidences:\n&quot;</span>); <a class="code" href="group__output.html#ga9a30c437ec11a11e37e0db7f82386275">apop_data_show</a>(confidences);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"></div>
<div class="line">    <span class="comment">//Some sanity checks, for Apophenia&#39;s test suite.</span></div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt; 10; i++){</div>
<div class="line">        <span class="comment">//sign of mean == sign of t stat.</span></div>
<div class="line">        assert(<a class="code" href="group__data__set__get.html#ga06107779e4a3eb229715ceca24352b89">apop_data_get</a>(means, i, -1) * <a class="code" href="group__data__set__get.html#ga06107779e4a3eb229715ceca24352b89">apop_data_get</a>(tstats, i, -1) &gt;=0);</div>
<div class="line"></div>
<div class="line">        <span class="comment">//inverse of P-value should be the t statistic.</span></div>
<div class="line">        assert(fabs(gsl_cdf_tdist_Pinv(<a class="code" href="group__data__set__get.html#ga06107779e4a3eb229715ceca24352b89">apop_data_get</a>(confidences, i, -1),100) </div>
<div class="line">                    - <a class="code" href="group__data__set__get.html#ga06107779e4a3eb229715ceca24352b89">apop_data_get</a>(tstats, i, -1) &lt; 1e-3));</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p>In the documentation for <a class="el" href="group__queries.html#ga2fbd580cd71f481ae04ee03b5cf64ff5">apop_query_to_text</a>, a program to list all the tables in an SQLite database. </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="apop_8h.html">apop.h</a>&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> print_table_list(<span class="keywordtype">char</span> *db_file){</div>
<div class="line">    <a class="code" href="apop_8h.html#a4d81aff912df2982697038c51795e358">apop_db_open</a>(db_file);</div>
<div class="line">    <a class="code" href="structapop__data.html">apop_data</a> *tab_list= <a class="code" href="group__queries.html#ga2fbd580cd71f481ae04ee03b5cf64ff5">apop_query_to_text</a>(<span class="stringliteral">&quot;select name &quot;</span></div>
<div class="line">                    <span class="stringliteral">&quot;from sqlite_master where type==&#39;table&#39;&quot;</span>);</div>
<div class="line">    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt; tab_list-&gt;textsize[0]; i++)</div>
<div class="line">        printf(<span class="stringliteral">&quot;%s\n&quot;</span>, tab_list-&gt;text[i][0]);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv){</div>
<div class="line">    <span class="keywordflow">if</span> (argc == 1){</div>
<div class="line">        printf(<span class="stringliteral">&quot;Give me a database name, and I will print out &quot;</span></div>
<div class="line">               <span class="stringliteral">&quot;the list of tables contained therein.\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> 0; </div>
<div class="line">    }</div>
<div class="line">    print_table_list(argv[1]);</div>
<div class="line">}</div>
</div><!-- fragment --><p>A demonstration of fixing parameters to create a marginal distribution, via <a class="el" href="apop__fix__params_8c.html#ab4f6ca7e042ac7c09c3c01d29702a739">apop_model_fix_params</a> </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="apop_8h.html">apop.h</a>&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main(){</div>
<div class="line">    <span class="keywordtype">size_t</span> ct = 5e4;</div>
<div class="line"></div>
<div class="line">    <span class="comment">//set up the model &amp; params</span></div>
<div class="line">    <a class="code" href="structapop__data.html">apop_data</a> *params = <a class="code" href="apop_8h.html#ac39d6a56933b6f084328ec5ecd5090d8">apop_data_alloc</a>(2,2,2);</div>
<div class="line">    <a class="code" href="apop_8h.html#ad6be56d710a63aa1ceadf2242c553905">apop_data_fill</a>(params, 8,  1, 0.5,</div>
<div class="line">                           2,  0.5, 1);</div>
<div class="line">    <a class="code" href="structapop__model.html">apop_model</a> *pvm = <a class="code" href="group__models.html#ga87d3a65f43071b9d61d9edd59249c629">apop_model_copy</a>(<a class="code" href="group__models.html#ga3a4389e6e2a1a2ea606f89d55ec558d3">apop_multivariate_normal</a>);</div>
<div class="line">    pvm-&gt;<a class="code" href="structapop__model.html#ae016a9e13725e84a1188bc81c8f09e45">parameters</a> = <a class="code" href="apop_8h.html#add67e6838ce2521a1d756894dc9b5ccf">apop_data_copy</a>(params);</div>
<div class="line">    pvm-&gt;<a class="code" href="structapop__model.html#a5e31343782fe36a70e60e6d0808c64b5">dsize</a> = 2;</div>
<div class="line">    <a class="code" href="structapop__data.html">apop_data</a> *d = <a class="code" href="apop_8h.html#a4e204cdc7429bef3ca2efb83453fe77a">apop_model_draws</a>(pvm, ct);</div>
<div class="line"></div>
<div class="line">    <span class="comment">//set up and estimate a model with fixed covariance matrix but free means</span></div>
<div class="line">    gsl_vector_set_all(pvm-&gt;<a class="code" href="structapop__model.html#ae016a9e13725e84a1188bc81c8f09e45">parameters</a>-&gt;vector, GSL_NAN);</div>
<div class="line">    <a class="code" href="structapop__model.html">apop_model</a> *mep1 = <a class="code" href="apop_8h.html#ab4f6ca7e042ac7c09c3c01d29702a739">apop_model_fix_params</a>(pvm);</div>
<div class="line">    <a class="code" href="structapop__model.html">apop_model</a> *e1 = <a class="code" href="group__models.html#ga2c0598e5aca68949939a189bd4ce24ca">apop_estimate</a>(d, mep1);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">//compare results, via assert for the test suite, or on-screen for human use.</span></div>
<div class="line"><span class="preprocessor">#ifdef Testing</span></div>
<div class="line">    assert(<a class="code" href="group__convenience__fns.html#ga44a77f5e6867c627fd313f3f6e252ff8">apop_vector_distance</a>(params-&gt;vector, e1-&gt;<a class="code" href="structapop__model.html#ae016a9e13725e84a1188bc81c8f09e45">parameters</a>-&gt;vector)&lt;1e-2);</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line">    printf(<span class="stringliteral">&quot;original params: &quot;</span>);</div>
<div class="line">    <a class="code" href="group__apop__print.html#ga8eafc3727869f5ec195809ad6686ba7b">apop_vector_show</a>(params-&gt;vector);</div>
<div class="line">    printf(<span class="stringliteral">&quot;estimated params: &quot;</span>);</div>
<div class="line">    <a class="code" href="group__apop__print.html#ga8eafc3727869f5ec195809ad6686ba7b">apop_vector_show</a>(e1-&gt;<a class="code" href="structapop__model.html#ae016a9e13725e84a1188bc81c8f09e45">parameters</a>-&gt;vector);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line">}</div>
</div><!-- fragment --><p>Several uses of the <a class="el" href="group__linear__algebra.html#gaf2d13e1b1f20f97e0772a0be41dc430e">apop_dot</a> function </p><div class="fragment"><div class="line"><span class="comment">/* A demonstration of dot products and various useful </span></div>
<div class="line"><span class="comment">   transformations among types. */</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="apop_8h.html">apop.h</a>&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">double</span> eps=1e-3;<span class="comment">//slow to converge series--&gt;large tolerance.</span></div>
<div class="line"><span class="preprocessor">#define Diff(L, R) Apop_assert(fabs((L)-(R)&lt;(eps)), &quot;%g is too different from %g (abitrary limit=%g).&quot;, (double)(L), (double)(R), eps);</span></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main(){</div>
<div class="line">    <span class="keywordtype">int</span> len = 3000;</div>
<div class="line">    gsl_vector *v = gsl_vector_alloc(len);</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">double</span> i=0; i&lt; len; i++) gsl_vector_set(v, i, 1./(i+1));</div>
<div class="line">    <span class="keywordtype">double</span> square;</div>
<div class="line">    gsl_blas_ddot(v, v, &amp;square);</div>
<div class="line"><span class="preprocessor">    #ifndef Testing</span></div>
<div class="line">    printf(<span class="stringliteral">&quot;1 + (1/2)^2 + (1/3)^2 + ...= %g\n&quot;</span>, square);</div>
<div class="line"><span class="preprocessor">    #endif</span></div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">double</span> pi_over_six = gsl_pow_2(M_PI)/6.;</div>
<div class="line">    Diff(square, pi_over_six);</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* Now using apop_dot, in a few forms.</span></div>
<div class="line"><span class="comment">       First, vector-as-data dot itself.</span></div>
<div class="line"><span class="comment">       If one of the inputs is a vector,</span></div>
<div class="line"><span class="comment">       apop_dot puts the output in a vector-as-data:*/</span></div>
<div class="line">    <a class="code" href="structapop__data.html">apop_data</a> *v_as_data = &amp;(<a class="code" href="apop_8h.html#a0c8c2a99fb8c6ec54822aca08591545e">apop_data</a>){.vector=v};</div>
<div class="line">    <a class="code" href="structapop__data.html">apop_data</a> *vdotv = <a class="code" href="group__linear__algebra.html#gaf2d13e1b1f20f97e0772a0be41dc430e">apop_dot</a>(v_as_data, v_as_data);</div>
<div class="line">    Diff(gsl_vector_get(vdotv-&gt;vector, 0), pi_over_six);</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* As a matrix-as-data, via a compound literal. </span></div>
<div class="line"><span class="comment">       Default is a len X 1 matrix. */</span></div>
<div class="line">    gsl_matrix *v_as_matrix = <a class="code" href="group__conversions.html#ga604388dc6d7d08d95bbaa4422085db9c">apop_vector_to_matrix</a>(v);</div>
<div class="line">    <a class="code" href="structapop__data.html">apop_data</a> dm = (<a class="code" href="apop_8h.html#a0c8c2a99fb8c6ec54822aca08591545e">apop_data</a>){.matrix=v_as_matrix};</div>
<div class="line"></div>
<div class="line">    <span class="comment">// (1 X len) dot (len X 1) --- OK, produce a scalar.</span></div>
<div class="line">    <a class="code" href="structapop__data.html">apop_data</a> *mdotv = <a class="code" href="group__linear__algebra.html#gaf2d13e1b1f20f97e0772a0be41dc430e">apop_dot</a>(v_as_data, &amp;dm);</div>
<div class="line">    <span class="keywordtype">double</span> scalarval = gsl_vector_get(mdotv-&gt;vector, 0);</div>
<div class="line">    Diff(scalarval, pi_over_six);</div>
<div class="line"></div>
<div class="line">    <span class="comment">//(len X 1) dot (len X 1) --- bad dimensions.</span></div>
<div class="line">    <a class="code" href="apop_8h.html#a7975faa07196cf463ec261ff0ddc3ccc">apop_opts</a>.<a class="code" href="structapop__opts__type.html#aa76e9237ed45c77bc883b428c3217a66">verbose</a>=-1; <span class="comment">//don&#39;t print an error.</span></div>
<div class="line">    <a class="code" href="structapop__data.html">apop_data</a> *mdotv2 = <a class="code" href="group__linear__algebra.html#gaf2d13e1b1f20f97e0772a0be41dc430e">apop_dot</a>(&amp;dm, v_as_data);</div>
<div class="line">    <a class="code" href="apop_8h.html#a7975faa07196cf463ec261ff0ddc3ccc">apop_opts</a>.<a class="code" href="structapop__opts__type.html#aa76e9237ed45c77bc883b428c3217a66">verbose</a>=0; <span class="comment">//back to sanity.</span></div>
<div class="line">    assert(mdotv2-&gt;error);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// If we want (len X 1) dot (1 X len) --&gt; (len X len),</span></div>
<div class="line">    <span class="comment">// use apop_vector_to_matrix.</span></div>
<div class="line">    <a class="code" href="structapop__data.html">apop_data</a> dmr = (<a class="code" href="apop_8h.html#a0c8c2a99fb8c6ec54822aca08591545e">apop_data</a>){.matrix=<a class="code" href="group__conversions.html#ga604388dc6d7d08d95bbaa4422085db9c">apop_vector_to_matrix</a>(v, .row_col=<span class="charliteral">&#39;r&#39;</span>)};</div>
<div class="line">    <a class="code" href="structapop__data.html">apop_data</a> *product_matrix = <a class="code" href="group__linear__algebra.html#gaf2d13e1b1f20f97e0772a0be41dc430e">apop_dot</a>(&amp;dm, &amp;dmr);</div>
<div class="line">    <span class="comment">//The trace is the sum of squares:</span></div>
<div class="line">    gsl_vector_view trace = gsl_matrix_diagonal(product_matrix-&gt;matrix);</div>
<div class="line">    <span class="keywordtype">double</span> tracesum = <a class="code" href="group__convenience__fns.html#ga7f85a98b61078ba3dc273f17eddd34a7">apop_sum</a>(&amp;trace.vector);</div>
<div class="line">    Diff(tracesum, pi_over_six);</div>
<div class="line"></div>
<div class="line">    <a class="code" href="apop_8h.html#a459acfde11f2c39f5c32cff377f85b9e">apop_data_free</a>(product_matrix);</div>
<div class="line">    gsl_matrix_free(dmr.matrix);</div>
<div class="line">}</div>
</div><!-- fragment --> </div></div><!-- contents -->
<p><p>
<div class="tiny">Autogenerated by doxygen on Mon Apr 20 2015.</div></body></html>
